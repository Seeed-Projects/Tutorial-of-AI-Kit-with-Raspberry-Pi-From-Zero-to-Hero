"use strict";(self.webpackChunktutorial_of_ai_kit=self.webpackChunktutorial_of_ai_kit||[]).push([[243],{4957:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>h});var a=t(5893),i=t(1151);const o={sidebar_position:4},r="Microsoft Phi3.5 3.8B",s={id:"Chapter_4-Large_Language_Model/Run_Phi3.5_on_Raspberryi",title:"Microsoft Phi3.5 3.8B",description:"Introduction",source:"@site/../articles/Chapter_4-Large_Language_Model/Run_Phi3.5_on_Raspberryi.md",sourceDirName:"Chapter_4-Large_Language_Model",slug:"/Chapter_4-Large_Language_Model/Run_Phi3.5_on_Raspberryi",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter_4-Large_Language_Model/Run_Phi3.5_on_Raspberryi",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Google Gemma 2 2B",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter_4-Large_Language_Model/Run_Gemma2_on_RaspberryPi"},next:{title:"Multimodal Models",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter_4-Large_Language_Model/Run_Multimodal_on_Raspberry"}},l={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Install Ollama",id:"install-ollama",level:2},{value:"Install and run Phi3.5",id:"install-and-run-phi35",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"microsoft-phi35-38b",children:"Microsoft Phi3.5 3.8B"}),"\n",(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsxs)(n.p,{children:["Let's pull a bigger (but still tiny) model, the ",(0,a.jsx)(n.a,{href:"https://ollama.com/library/phi3.5",children:"PHI3.5,"})," a 3.8B lightweight state-of-the-art open model by Microsoft. The model belongs to the Phi-3 model family and supports ",(0,a.jsx)(n.code,{children:"128K token"})," context length and the languages: Arabic, Chinese, Czech, Danish, Dutch, English, Finnish, French, German, Hebrew, Hungarian, Italian, Japanese, Korean, Norwegian, Polish, Portuguese, Russian, Spanish, Swedish, Thai, Turkish and Ukrainian."]}),"\n",(0,a.jsxs)(n.p,{children:["The model size, in terms of bytes, will depend on the specific quantization format used. The size can go from 2-bit quantization (",(0,a.jsx)(n.code,{children:"q2_k"}),") of 1.4GB (higher performance/lower quality) to 16-bit quantization (fp-16) of 7.6GB (lower performance/higher quality)."]}),"\n",(0,a.jsxs)(n.p,{children:["Let's run the 4-bit quantization (",(0,a.jsx)(n.code,{children:"Q4_0"}),"), which will need 2.2GB of RAM, with an intermediary trade-off regarding output quality and performance."]}),"\n",(0,a.jsx)(n.h2,{id:"install-ollama",children:"Install Ollama"}),"\n",(0,a.jsxs)(n.p,{children:["Please refer to this ",(0,a.jsx)(n.a,{href:"https://github.com/Seeed-Projects/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/blob/main/articles/Chapter%204%20-%20Large%20Language%20Model/Setup_Ollama_on_RaspberryPi.md",children:"article"})]}),"\n",(0,a.jsx)(n.h2,{id:"install-and-run-phi35",children:"Install and run Phi3.5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ollama run phi3.5:3.8b --verbose\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["You can use ",(0,a.jsx)(n.code,{children:"run"})," or ",(0,a.jsx)(n.code,{children:"pull"})," to download the model. What happens is that Ollama keeps note of the pulled models, and once the PHI3 does not exist, before running it, Ollama pulls it."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Let's enter with the same prompt used before:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:">>> What is the capital of France?\n\nThe capital of France is Paris. It' extradites significant \nhistorical, cultural, and political importance to the country as \nwell as being a major European city known for its art, fashion, \ngastronomy, and culture. Its influence extends beyond national \nborders, with millions of tourists visiting each year from around \nthe globe. The Seine River flows through Paris before it reaches \nthe broader English Channel at Le Havre. Moreover, France is one \nof Europe's leading economies with its capital playing a key role \n\n...\n"})}),"\n",(0,a.jsx)(n.p,{children:'The answer was very "verbose", let\'s specify a better prompt:'}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(9258).Z+"",width:"842",height:"545"})}),"\n",(0,a.jsx)(n.p,{children:"In this case, the answer was still longer than we expected, with an eval rate of 2.25 tokens/s, more than double that of Gemma and Llama."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Choosing the most appropriate prompt is one of the most important skills to be used with LLMs, no matter its size."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["When we asked the same questions about distance and Latitude/Longitude, we did not get a good answer for a distance of ",(0,a.jsx)(n.code,{children:"13,507 kilometers (8,429 miles)"}),", but it was OK for coordinates. Again, it could have been less verbose (more than 200 tokens for each answer)."]}),"\n",(0,a.jsxs)(n.p,{children:["We can use any model as an assistant since their speed is relatively decent, but on September 24, the Llama2:3B is a better choice. You should try other models, depending on your needs. ",(0,a.jsx)(n.a,{href:"https://huggingface.co/spaces/open-llm-leaderboard/open_llm_leaderboard",children:"\ud83e\udd17 Open LLM Leaderboard"})," can give you an idea about the best models in size, benchmark, license, etc."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"The best model to use is the one fit for your specific necessity. Also, take into consideration that this field evolves with new models every day,"}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},9258:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/paris-2-85441bb862540137c9747b807a39928e.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>r});var a=t(7294);const i={},o=a.createContext(i);function r(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);