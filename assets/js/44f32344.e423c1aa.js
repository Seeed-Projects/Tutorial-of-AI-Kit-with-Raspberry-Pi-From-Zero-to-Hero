"use strict";(self.webpackChunktutorial_of_ai_kit=self.webpackChunktutorial_of_ai_kit||[]).push([[969],{1283:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var t=i(5893),o=i(1151);const a={sidebar_position:4},l="Accelerating the MediaPipe models with Hailo NPU",r={id:"Chapter_3-Computer_Vision_Projects_and_Practical_Applications/Accelerating_the_MediaPipe_models_with_Hailo_NPU",title:"Accelerating the MediaPipe models with Hailo NPU",description:"Overview",source:"@site/../articles/Chapter_3-Computer_Vision_Projects_and_Practical_Applications/Accelerating_the_MediaPipe_models_with_Hailo_NPU.md",sourceDirName:"Chapter_3-Computer_Vision_Projects_and_Practical_Applications",slug:"/Chapter_3-Computer_Vision_Projects_and_Practical_Applications/Accelerating_the_MediaPipe_models_with_Hailo_NPU",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter_3-Computer_Vision_Projects_and_Practical_Applications/Accelerating_the_MediaPipe_models_with_Hailo_NPU",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Run Clip Application with Hailo NPU",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter_3-Computer_Vision_Projects_and_Practical_Applications/Run_Clip_Application_with_Hailo_NPU"},next:{title:"Make your Own Web Application with Hailo and Using Flask",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter_3-Computer_Vision_Projects_and_Practical_Applications/Make_Your_Own_Web_Application_with_Hailo_and_Using_Flask"}},s={},d=[{value:"Overview",id:"overview",level:2},{value:"Prepare Hardware",id:"prepare-hardware",level:2},{value:"Install Hailo Software &amp; Verify Installation",id:"install-hailo-software--verify-installation",level:2},{value:"update the system:",id:"update-the-system",level:3},{value:"Set pcie to gen2/gen3(gen3 is faster than gen2):",id:"set-pcie-to-gen2gen3gen3-is-faster-than-gen2",level:3},{value:"Install hailo-all and reboot:",id:"install-hailo-all-and-reboot",level:3},{value:"Check Software and Hardware:",id:"check-software-and-hardware",level:3},{value:"Run Project",id:"run-project",level:2},{value:"Install Project",id:"install-project",level:3},{value:"Install the hailo model",id:"install-the-hailo-model",level:3},{value:"Install necessary lib",id:"install-necessary-lib",level:3},{value:"Run the project",id:"run-the-project",level:3},{value:"Result",id:"result",level:2}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"accelerating-the-mediapipe-models-with-hailo-npu",children:"Accelerating the MediaPipe models with Hailo NPU"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/google-ai-edge/mediapipe",children:"MediaPipe"})," is an open-source framework created by Google for constructing machine learning pipelines that handle time-series data, including video and audio. It provides customizable solutions for a wide range of applications, particularly in computer vision and on-device machine learning tasks."]}),"\n",(0,t.jsx)(n.p,{children:"This article outlines the process of deploying a MediaPipe model on an AI Box to enhance hand detection, gesture landmarks, and face landmarks."}),"\n",(0,t.jsx)(n.h2,{id:"prepare-hardware",children:"Prepare Hardware"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"}),"\nPlease connect a USB camera to the AI Box."]}),"\n"]}),"\n",(0,t.jsx)("div",{class:"table-center",children:(0,t.jsxs)("table",{align:"center",children:[(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"reComputer AI R2130"})}),(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)("img",{src:"https://media-cdn.seeedstudio.com/media/catalog/product/cache/bb49d3ec4ee05b6f018e93f896b8a25d/1/_/1_24_1.jpg",style:{width:600,height:"auto"}})})})}),(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsx)("div",{class:"get_one_now_container",style:{textAlign:"center"},children:(0,t.jsx)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reComputer-AI-R2130-12-p-6368.html",children:(0,t.jsx)("strong",{children:(0,t.jsx)("span",{children:(0,t.jsx)("font",{color:"FFFFFF",size:"4",children:" Get One Now \ud83d\uddb1\ufe0f"})})})})})})})]})}),"\n",(0,t.jsx)(n.h2,{id:"install-hailo-software--verify-installation",children:"Install Hailo Software & Verify Installation"}),"\n",(0,t.jsx)(n.h3,{id:"update-the-system",children:"update the system:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo apt update\nsudo apt full-upgrade\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"Sometimes you may encounter the following issues during updates."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]\nGet:2 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]\nGet:3 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]\nGet:4 http://archive.raspberrypi.com/debian bookworm InRelease [39.0 kB]\nReading package lists... Done                                   \nE: Release file for http://deb.debian.org/debian/dists/bookworm/InRelease is not valid yet (invalid for another 58d 8h 26min 35s). Updates for this repository will not be applied.\nE: Release file for http://deb.debian.org/debian-security/dists/bookworm-security/InRelease is not valid yet (invalid for another 84d 18h 23min 59s). Updates for this repository will not be applied.\nE: Release file for http://archive.raspberrypi.com/debian/dists/bookworm/InRelease is not valid yet (invalid for another 84d 13h 13min 5s). Updates for this repository will not be applied.\nE: Release file for http://deb.debian.org/debian/dists/bookworm-updates/InRelease is not valid yet (invalid for another 85d 0h 52min 29s). Updates for this repository will not be applied.\t\n"})}),(0,t.jsx)(n.p,{children:"This is because the time on the Raspberry Pi is set incorrectly, and you need to manually set the time on the Raspberry Pi with command below:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# This command only you can connect google.com\nsudo date -s \"$(wget -qSO- --max-redirect=0 google.com 2>&1 | grep Date: | cut -d' ' -f5-8)Z\"\n"})}),(0,t.jsx)(n.p,{children:"After set your raspberry time, you can update your raspberry."})]}),"\n",(0,t.jsx)(n.h3,{id:"set-pcie-to-gen2gen3gen3-is-faster-than-gen2",children:"Set pcie to gen2/gen3(gen3 is faster than gen2):"}),"\n",(0,t.jsxs)(n.p,{children:["Add following text to ",(0,t.jsx)(n.code,{children:"/boot/firmware/config.txt"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"#Enable the PCIe external connector\n\ndtparam=pciex1\n\n#Force Gen 3.0 speeds\n\ndtparam=pciex1_gen=3\n\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"If you want to use gen2, please comment dtparam=pciex1_gen=3"})}),"\n",(0,t.jsx)(n.h3,{id:"install-hailo-all-and-reboot",children:"Install hailo-all and reboot:"}),"\n",(0,t.jsx)(n.p,{children:"Open terminal on the AI Box, and input command as follows to install Hailo software."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo apt install hailo-all\nsudo apt-get -y install libblas-dev nlohmann-json3-dev\nsudo reboot\n"})}),"\n",(0,t.jsx)(n.h3,{id:"check-software-and-hardware",children:"Check Software and Hardware:"}),"\n",(0,t.jsx)(n.p,{children:"Open terminal on the AI Box, and input command as follows to check if hailo-all have been installed."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"hailortcli fw-control identify\n"})}),"\n",(0,t.jsx)(n.p,{children:"The right result show as bellow:"}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:(0,t.jsx)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/check_software.png",alt:"pir",width:1e3,height:"auto"})}),"\n",(0,t.jsx)(n.p,{children:"Open terminal on the AI Box, and input command as follows to check if hailo-8L have been connected."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"lspci | grep Hailo\n"})}),"\n",(0,t.jsx)(n.p,{children:"The right result show as bellow:"}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:(0,t.jsx)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/YOLOV8/check_hardware.png",alt:"pir",width:1e3,height:"auto"})}),"\n",(0,t.jsx)(n.h2,{id:"run-project",children:"Run Project"}),"\n",(0,t.jsx)(n.h3,{id:"install-project",children:"Install Project"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"git clone https://github.com/AlbertaBeef/blaze_app_python\n"})}),"\n",(0,t.jsx)(n.h3,{id:"install-the-hailo-model",children:"Install the hailo model"}),"\n",(0,t.jsx)(n.p,{children:"Input the command below you will see a clip demo:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cd blaze_app_python\n\nsudo chmod 755 ./blaze_hailo/models/get_hailo8_models.sh\n\n./blaze_hailo/models/get_hailo8_models.sh\n\nunzip ./blaze_hailo/models/blaze_hailo8_models.zip\n\nmv ./blaze_hailo/models/hailo8/* ./blaze_hailo/models/   \n"})}),"\n",(0,t.jsx)(n.h3,{id:"install-necessary-lib",children:"Install necessary lib"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"python -m venv .env && source .env/bin/activate\npip install numpy opencv-python plotly\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-the-project",children:"Run the project"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cd ./blaze_hailo\npython blaze_detect_live.py --blaze hand -f\n"})}),"\n",(0,t.jsx)(n.h2,{id:"result",children:"Result"}),"\n",(0,t.jsx)(n.p,{children:"Coming soon..."})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>l});var t=i(7294);const o={},a=t.createContext(o);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);