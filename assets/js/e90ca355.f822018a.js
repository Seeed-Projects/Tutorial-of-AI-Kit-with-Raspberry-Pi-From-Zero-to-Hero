"use strict";(self.webpackChunktutorial_of_ai_kit=self.webpackChunktutorial_of_ai_kit||[]).push([[214],{9374:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=a(5893),i=a(1151);const r={sidebar_position:5},s="Multimodal Models",o={id:"Chapter 4 - Large Language Model/Run_Multimodal_on_Raspberry",title:"Multimodal Models",description:"Introduction",source:"@site/../articles/Chapter 4 - Large Language Model/Run_Multimodal_on_Raspberry.md",sourceDirName:"Chapter 4 - Large Language Model",slug:"/Chapter 4 - Large Language Model/Run_Multimodal_on_Raspberry",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter 4 - Large Language Model/Run_Multimodal_on_Raspberry",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Microsoft Phi3.5 3.8B",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter 4 - Large Language Model/Run_Phi3.5_on_Raspberryi"},next:{title:"Ollama Python Library",permalink:"/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/docs/Chapter 4 - Large Language Model/Use_Ollama_with_Python"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Install Ollama",id:"install-ollama",level:2},{value:"Install and run llava",id:"install-and-run-llava",level:2},{value:"Inspecting local resources",id:"inspecting-local-resources",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"multimodal-models",children:"Multimodal Models"}),"\n",(0,n.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsx)(t.p,{children:"Multimodal models are artificial intelligence (AI) systems that can process and understand information from multiple sources, such as images, text, audio, and video. In our context, multimodal LLMs can process various inputs, including text, images, and audio, as prompts and convert those prompts into various outputs, not just the source type."}),"\n",(0,n.jsxs)(t.p,{children:["We will work here with ",(0,n.jsx)(t.a,{href:"https://ollama.com/library/llava-phi3:3.8b",children:"LLaVA-Phi-3"}),", a fine-tuned LLaVA model from Phi 3 Mini 4k. It has strong performance benchmarks that are on par with the original ",(0,n.jsx)(t.a,{href:"https://llava-vl.github.io/",children:"LLaVA"})," (Large Language and Vision Assistant) model."]}),"\n",(0,n.jsx)(t.p,{children:"The LLaVA-Phi-3 is an end-to-end trained large multimodal model designed to understand and generate content based on visual inputs (images) and textual instructions. It combines the capabilities of a visual encoder and a language model to process and respond to multimodal inputs."}),"\n",(0,n.jsx)(t.h2,{id:"install-ollama",children:"Install Ollama"}),"\n",(0,n.jsxs)(t.p,{children:["Please refer to this ",(0,n.jsx)(t.a,{href:"https://github.com/Seeed-Projects/Tutorial-of-AI-Kit-with-Raspberry-Pi-From-Zero-to-Hero/blob/main/articles/Chapter%204%20-%20Large%20Language%20Model/Setup_Ollama_on_RaspberryPi.md",children:"article"})]}),"\n",(0,n.jsx)(t.h2,{id:"install-and-run-llava",children:"Install and run llava"}),"\n",(0,n.jsx)(t.p,{children:"Let's install the model:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"ollama run llava-phi3:3.8b --verbose\n"})}),"\n",(0,n.jsx)(t.p,{children:"Let's start with a text input:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:">>> You are a helpful AI assistant. What is the capital of France?\n\nAs an AI language model, I can tell you that the capital of France \nis Paris. It's not only the largest city in the country but also \nserves as its political and administrative center. Paris is known \nfor its iconic landmarks such as the Eiffel Tower, Notre-Dame \nCathedral, and the Louvre Museum. The city has a rich history, \nbeautiful architecture, and is widely considered to be one of the \nmost romantic cities in the world.\n"})}),"\n",(0,n.jsx)(t.p,{children:"The response took around 30s, with an eval rate of 3.93 tokens/s! Not bad!"}),"\n",(0,n.jsx)(t.p,{children:"But let us know to enter with an image as input. For that, let's create a directory for working:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"cd Documents/\nmkdir OLLAMA\ncd OLLAMA\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Let's download a 640x320 image from the internet, for example (Wikipedia: ",(0,n.jsx)(t.a,{href:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/La_Tour_Eiffel_vue_de_la_Tour_Saint-Jacques%2C_Paris_ao%C3%BBt_2014_%282%29.jpg/640px-La_Tour_Eiffel_vue_de_la_Tour_Saint-Jacques%2C_Paris_ao%C3%BBt_2014_%282%29.jpg",children:"Paris, France)"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:a(9099).Z+"",width:"640",height:"400"})}),"\n",(0,n.jsxs)(t.p,{children:["Using FileZilla, for example, let's upload the image to the OLLAMA folder at the Raspi-5 and name it ",(0,n.jsx)(t.code,{children:"image_test_1.jpg"}),". We should have the whole image path (we can use ",(0,n.jsx)(t.code,{children:"pwd"})," to get it)."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"/home/mjrovai/Documents/OLLAMA/image_test_1.jpg"})}),"\n",(0,n.jsx)(t.p,{children:"If you use a desktop, you can copy the image path by clicking the image with the mouse's right button."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:a(3153).Z+"",width:"740",height:"537"})}),"\n",(0,n.jsx)(t.p,{children:"Let's enter with this prompt:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:">>> Describe the image /home/mjrovai/Documents/OLLAMA/image_test_1.jpg\n"})}),"\n",(0,n.jsx)(t.p,{children:"The result was great, but the overall latency was significant; almost 4 minutes to perform the inference."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:a(3394).Z+"",width:"962",height:"865"})}),"\n",(0,n.jsx)(t.h2,{id:"inspecting-local-resources",children:"Inspecting local resources"}),"\n",(0,n.jsx)(t.p,{children:"Using htop, we can monitor the resources running on our device."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"htop\n"})}),"\n",(0,n.jsx)(t.p,{children:"During the time that the model is running, we can inspect the resources:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:a(5106).Z+"",width:"922",height:"602"})}),"\n",(0,n.jsxs)(t.p,{children:["All four CPUs run at almost 100% of their capacity, and the memory used with the model loaded is ",(0,n.jsx)(t.code,{children:"3.24GB"}),". Exiting Ollama, the memory goes down to around ",(0,n.jsx)(t.code,{children:"377MB"})," (with no desktop)."]}),"\n",(0,n.jsx)(t.p,{children:"It is also essential to monitor the temperature. When running the Raspberry with a desktop, you can have the temperature shown on the taskbar:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:a(6163).Z+"",width:"314",height:"36"})}),"\n",(0,n.jsx)(t.p,{children:'If you are "headless", the temperature can be monitored with the command:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"vcgencmd measure_temp\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you are doing nothing, the temperature is around ",(0,n.jsx)(t.code,{children:"50\xb0C"})," for CPUs running at 1%. During inference, with the CPUs at 100%, the temperature can rise to almost ",(0,n.jsx)(t.code,{children:"70\xb0C"}),".  This is OK and means the active cooler is working, keeping the temperature below 80\xb0C / 85\xb0C (its limit)."]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},5106:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/htop-58633160f5798db6ecd6ecef14dc564f.png"},3153:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image_test-path-67dcb1ed6dbfccdd6b006003b47e8c0d.png"},3394:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/paris-infer-1-f8b013804992e247bffd40d117226d9f.png"},9099:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/paris-16189b3cac8d4f619647964814e8d37e.jpg"},6163:(e,t,a)=>{a.d(t,{Z:()=>n});const n="data:image/png;base64,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"},1151:(e,t,a)=>{a.d(t,{Z:()=>o,a:()=>s});var n=a(7294);const i={},r=n.createContext(i);function s(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);